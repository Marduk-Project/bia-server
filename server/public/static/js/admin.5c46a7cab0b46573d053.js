(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={admin:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([1,"chunk-vendors","chunk-common"]),a()})({"02d5":function(t,e,a){"use strict";var n=a("cb52"),i=a.n(n);i.a},1:function(t,e,a){t.exports=a("b7fb")},"3e47":function(t,e,a){},"828c":function(t,e,a){"use strict";var n=a("e627"),i=a.n(n);i.a},a55b:function(t,e,a){},b7fb:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=a("8c4f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view",{attrs:{name:"header"}}),a("router-view"),a("router-view",{attrs:{name:"footer"}}),a("app-notify"),a("transition",{attrs:{name:"ldfade",appear:""}},[t.isLoading?a("div",{staticClass:"app-loading"},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("i",{staticClass:"fa fa-spin fa-circle-o-notch fa-5x"})])]):t._e()])],1)},s=[],o=(a("8e6e"),a("456d"),a("ac6a"),a("bd86")),c=a("2f62"),l=a("3022"),u=a.n(l),d=a("34bf");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={components:{"app-notify":d["a"]},computed:h({},Object(c["b"])(["isLoading"])),methods:{checkFlashesMessages:function(){var t=this;u.a.isArray(window.app_flashes)?window.app_flashes.forEach((function(e){t.$store.dispatch("notify",e)})):console.warn("Flash messages not configured!")}},created:function(){window.app_loggedIn&&this.$store.dispatch("loadSession")},mounted:function(){this.checkFlashesMessages()}},m=f,v=(a("f96c"),a("02d5"),a("2877")),_=Object(v["a"])(m,r,s,!1,null,"0dc42067",null),b=_.exports,g=a("1379");window.app_routes=a("eb9d"),a("2a2d"),a("098b");var y=new i["a"]({routes:window.app_routes.default}),w=document.body.querySelector("#app");w&&new n["default"]({el:"#app",store:g["a"],router:y,render:function(t){return t(b)}})},cb52:function(t,e,a){},e627:function(t,e,a){},e6e2:function(t,e,a){"use strict";var n=a("3e47"),i=a.n(n);i.a},eb9d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("br"),a("h2",{staticClass:"text-center"},[t._v("Bem-vindo ao painel administrativo.")]),a("div",{staticClass:"jumbotron"},[a("blockquote",{staticClass:"blockquote"},[a("p",{staticClass:"mb-0"},[t._v('"Antes do Sol engolir o planeta Terra, daqui à 1 bilhão de anos, teremos um dashboard aqui. Acreditem nisto! :)"')]),a("div",{staticClass:"blockquote-footer"},[a("cite",{staticClass:"text-muted"},[t._v("Carlos Borges")])])])])])}],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=a("8592"),o=a("a058"),c=a("2f62");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={mixins:[o["a"]],components:{},computed:u({},Object(c["b"])({sessionAccount:"getAccount"})),watch:{sessionAccount:function(t){this.account=t,this.level=t.account_level}},data:function(){return{account:null,level:10}},methods:{onGoToAccountClick:function(){var t=this;this.account?(this.api_loadingShow(),s["a"].post("/api/admin/auth/setAccount",{id:this.account._id,level:this.level}).then(this.api_thenDone((function(){t.api_loadingShow(),window.location.href="/account"}),!0)).catch(this.api_catch())):this.notify_warning("Selecione a conta.")}},mounted:function(){this.$store.dispatch("setTitle","Dashboard")}},p=d,h=a("2877"),f=Object(h["a"])(p,n,i,!1,null,"4604ce5b",null),m=f.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[a("a",{staticClass:"navbar-brand",attrs:{href:"/admin"}},[t._v(t._s(t.app_current_name))]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[t._m(1),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarCrudDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Cadastros")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarCrudDropdown"}},[t.isUserAdmin?a("router-link",{staticClass:"dropdown-item",attrs:{tag:"a","active-class":"active",to:{name:"user.index"}}},[a("i",{staticClass:"fas fa-user"}),t._v(" Usuários\n          ")]):t._e()],1)])]),a("div",{staticClass:"d-inline-flex"},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.isUserAdmin,expression:"isUserAdmin"}],staticClass:"nav-item dropdown"},[t._m(2),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"navbarDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/maintenance",tag:"a","active-class":"active"}},[a("i",{staticClass:"fas fa-cogs"}),t._v(" Manutenção\n            ")])],1)]),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fa fa-user-circle"}),t._v("\n            "+t._s(t.userNickname)+"\n          ")]),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"navbarDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"user.profile",params:{routeBack:"/dashboard"}},tag:"a","active-class":"active"}},[a("a",[a("i",{staticClass:"fas fa-user-circle"}),t._v(" Meus dados\n              ")])]),a("div",{staticClass:"dropdown-divider"}),t._m(3)],1)])])])])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Ir")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"/admin"}},[a("i",{staticClass:"fas fa-tachometer-alt"}),t._v(" Dashboard\n          ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-cog"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"dropdown-item",attrs:{href:"/logout"}},[a("i",{staticClass:"fa fa-sign-out-alt"}),t._v(" Logout\n            ")])}];function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={computed:g({},Object(c["b"])({isUserAdmin:"isUserAdmin",userName:"getUserName",userNickname:"getUserNickname"}),{app_current_name:function(){return window.app_short_name}})},w=y,C=(a("828c"),Object(h["a"])(w,v,_,!1,null,"9853a214",null)),k=C.exports,E=a("95bb"),x=a("a801"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("br"),a("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:t.crud_navBack}},[a("i",{staticClass:"fa fa-chevron-left"}),t._v(" Voltar\n  ")]),a("br"),a("h1",[t._v("Meus dados")]),a("form",{attrs:{action:"",novalidate:""},on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-8"},[a("label",[t._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.name,expression:"entity.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name","crud")},attrs:{name:"name",placeholder:"","data-vv-scope":"crud",type:"text",maxlength:"100"},domProps:{value:t.entity.name},on:{input:function(e){e.target.composing||t.$set(t.entity,"name",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("Campo obrigatório.")])]),a("div",{staticClass:"form-group col-md-4"},[a("label",[t._v("Apelido")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.nickname,expression:"entity.nickname"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("nickname","crud")},attrs:{name:"nickname",placeholder:"","data-vv-scope":"crud",type:"text",maxlength:"100"},domProps:{value:t.entity.nickname},on:{input:function(e){e.target.composing||t.$set(t.entity,"nickname",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("Campo obrigatório.")])]),a("div",{staticClass:"form-group col-md-8"},[a("label",[t._v("E-mail")]),a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"",readonly:""},domProps:{value:t.entity.email}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",[t._v("ID")]),a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"",readonly:""},domProps:{value:t.entity._id}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-5 col-lg-4 col-xl-2"},[a("button",{staticClass:"btn btn-success w-100",attrs:{type:"button"},on:{click:t.crud_onSaveClick}},[a("i",{staticClass:"fa fa-check"}),t._v(" Salvar\n        ")])])])]),a("br"),a("br"),a("h3",[t._v("Alterar senha")]),a("form",{attrs:{action:"",novalidate:""},on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",[t._v("Senha atual")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd_current,expression:"pwd_current"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"pwd_current",type:"password",placeholder:""},domProps:{value:t.pwd_current},on:{input:function(e){e.target.composing||(t.pwd_current=e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",[t._v("Nova senha")]),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"pwd_new",state:null==t.pwd_error&&null,type:"password",placeholder:"","aria-describedby":"pg-pwd-feedback"},model:{value:t.pwd_new,callback:function(e){t.pwd_new=e},expression:"pwd_new"}}),a("b-form-invalid-feedback",{attrs:{id:"pg-pwd-feedback"}},[t._v(t._s(t.pwd_error))])],1)]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",[t._v("Confirme a senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd_conf,expression:"pwd_conf"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"pwd_conf",type:"password",placeholder:""},domProps:{value:t.pwd_conf},on:{input:function(e){e.target.composing||(t.pwd_conf=e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-5 col-lg-4 col-xl-2"},[a("button",{staticClass:"btn btn-success w-100",attrs:{type:"button"},on:{click:t.onChangePasswordClick}},[a("i",{staticClass:"fa fa-key"}),t._v(" Alterar\n        ")])])])])])},P=[],$=(a("7f7f"),a("7357")),j={mixins:[o["a"],$["notifyMixin"]],data:function(){return{entity:{_id:null,name:null,nickname:null,email:null},pwd_current:"",pwd_new:"",pwd_conf:""}},computed:{pwd_error:function(){return""==this.pwd_current&&""==this.pwd_new&&""==this.pwd_conf?null:this.pwd_current?this.pwd_new?this.pwd_new.length<6||this.pwd_new.length>32?"Senha precisa ter entre 6 e 32 caracteres.":this.pwd_conf?this.pwd_new!=this.pwd_conf?"As senhas não são iguais.":null:"Confirme a senha.":"Nova senha em branco.":"Senha atual em branco."}},methods:{onChangePasswordClick:function(){var t=this;if(this.pwd_error)this.notify_danger(this.pwd_error);else if(""!=this.pwd_current||""!=this.pwd_new||""!=this.pwd_conf){var e={pwd_current:this.pwd_current,pwd_new:this.pwd_new};this.api_loadingShow(),s["a"].post("/api/admin/user/me/pwd_update",e).then(this.api_thenDone((function(e){t.pwd_current="",t.pwd_new="",t.pwd_conf=""}))).catch(this.api_catch())}},crud_refreshEntity:function(){var t=this;this.api_loadingShow(),s["a"].get("/api/admin/user/me").then((function(e){t.api_parseOK(e)&&(e.data.warnings&&t.notify_warning(e.data.warnings),t.entity=e.data.data,t.api_loadingHide())})).catch(this.api_catch())},crud_navBack:function(){this.$router.push({name:"dashboard"})},crud_onSaveClick:function(){var t=this,e=this.$validator.validateAll("crud");e.then((function(e){if(e){t.api_loadingShow();var a={name:t.entity.name,nickname:t.entity.nickname};s["a"].post("/api/admin/user/me/update",a).then(t.api_thenDone((function(e){t.$store.dispatch("loadSession")}))).catch(t.api_catch())}else t.crud_onValidateError()}))}},mounted:function(){this.crud_refreshEntity(),this.$store.dispatch("setTitle","Meus dados")}},S=j,q=Object(h["a"])(S,O,P,!1,null,"769fb0ec",null),R=q.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.entity?a("div",{staticClass:"container"},[a("br"),a("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:t.crud_navBack}},[a("i",{staticClass:"fa fa-chevron-left"}),t._v(" Voltar\n  ")]),a("br"),a("h1",[t._v(t._s(t.crud_title))]),a("form",{attrs:{action:"",novalidate:""},on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-6"},[a("label",[t._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.name,expression:"entity.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{name:"name",placeholder:"ex. John Eduard",type:"text",maxlength:"100"},domProps:{value:t.entity.name},on:{input:function(e){e.target.composing||t.$set(t.entity,"name",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("Campo obrigatório.")])]),a("div",{staticClass:"form-group col-lg-3"},[a("label",[t._v("Apelido")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.nickname,expression:"entity.nickname"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("nickname")},attrs:{name:"nickname",placeholder:"ex. John",type:"text",maxlength:"100"},domProps:{value:t.entity.nickname},on:{input:function(e){e.target.composing||t.$set(t.entity,"nickname",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("Campo obrigatório.")])]),a("div",{staticClass:"form-group col-lg-3"},[a("label",[t._v("Nível")]),a("app-user-level-select",{model:{value:t.entity.level,callback:function(e){t.$set(t.entity,"level",e)},expression:"entity.level"}})],1),a("div",{staticClass:"form-group col-lg-6"},[a("label",[t._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.email,expression:"entity.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{name:"email",placeholder:"email",type:"text",maxlength:"60"},domProps:{value:t.entity.email},on:{input:function(e){e.target.composing||t.$set(t.entity,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("E-mail é obrigatório.")])])]),a("br"),a("h4",[t._v("Regras")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-12"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label",class:{"text-danger":t.entity.blocked}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.blocked,expression:"entity.blocked"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(t.entity.blocked)?t._i(t.entity.blocked,"1")>-1:t.entity.blocked},on:{change:function(e){var a=t.entity.blocked,n=e.target,i=!!n.checked;if(Array.isArray(a)){var r="1",s=t._i(a,r);n.checked?s<0&&t.$set(t.entity,"blocked",a.concat([r])):s>-1&&t.$set(t.entity,"blocked",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.entity,"blocked",i)}}}),t._v("\n            Bloqueado / inativo\n          ")])])])]),a("br"),a("h4",[t._v("Contas vinculadas")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-6"},[a("label",[t._v("Conta")]),a("app-account-select",{model:{value:t.accountEntity.account_id,callback:function(e){t.$set(t.accountEntity,"account_id",e)},expression:"accountEntity.account_id"}})],1),a("div",{staticClass:"form-group col-lg-3"},[a("label",[t._v("Nível")]),a("app-account-level-select",{model:{value:t.accountEntity.level,callback:function(e){t.$set(t.accountEntity,"level",e)},expression:"accountEntity.level"}})],1),a("div",{staticClass:"form-group col-lg-3"},[a("label",[t._v(" ")]),a("button",{staticClass:"btn btn-outline-success w-100",attrs:{type:"button"},on:{click:t.account_onAddClick}},[a("i",{staticClass:"fas",class:{"fa-plus":t.accountEntity.new,"fa-check":!t.accountEntity.new}}),t._v("\n          "+t._s(t.accountEntity.new?"Adicionar":"Alterar")+"\n        ")])])]),a("table",{staticClass:"table table-hover table-striped"},[a("thead",[a("tr",[a("th",[t._v("Conta")]),a("th",[t._v("Nível na conta")]),a("th",{staticClass:"app-table-actions"},[t._v("\n            A.\n            "),a("app-info",{attrs:{title:"Ações"}})],1)])]),a("tbody",t._l(t.entity.accounts,(function(e){return a("tr",{key:e.mid,class:{"table-active":t.account_isItemSelected(e)},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.account_onItemClick(e)}}},[a("td",[t._v(t._s(e.account_id.name))]),a("td",[t._v(t._s(e.level_desc?e.level_desc:t.account_levelToDesc(e.level)))]),a("td",{staticClass:"app-table-actions"},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fas fa-trash text-danger app-table-action",attrs:{title:"Excluir"},on:{click:function(a){return a.stopPropagation(),t.account_onDeleteClick(e)}}})])])})),0)]),a("br"),a("br"),a("div",{staticClass:"form-row"},[a("app-crud-buttons",{attrs:{"delete-show":null!=t.entity._id},on:{onSave:t.crud_onSaveAction,onDelete:t.crud_onDeleteAction}})],1),a("br"),t.entity._id?a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("Sistema")]),a("div",{staticClass:"card-body"},[a("h4",[t._v("Senha")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-4"},[a("label",[t._v("Testar senha")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd_check,expression:"pwd_check"}],staticClass:"form-control",attrs:{name:"pwd_check",type:"password",minlength:"6",placeholder:"senha atual"},domProps:{value:t.pwd_check},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.onPwdCheckClick(e))},input:function(e){e.target.composing||(t.pwd_check=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.onPwdCheckClick}},[a("i",{staticClass:"fa fa-user-secret"})])])])]),a("div",{staticClass:"form-group col-lg-4"},[a("label",[t._v("Alterar senha")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd_change,expression:"pwd_change"}],staticClass:"form-control",attrs:{name:"pwd_change",type:"password",minlength:"6",placeholder:"nova senha"},domProps:{value:t.pwd_change},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.onPwdChangeClick(e))},input:function(e){e.target.composing||(t.pwd_change=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.onPwdChangeClick}},[a("i",{staticClass:"fa fa-key"})])])])])])])]):t._e(),a("app-entitybaseinfo",{attrs:{entity:t.entity}})],1)]):t._e()},D=[],N=(a("7514"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row col-12 pt-1"},[a("div",{staticClass:"form-group col-md-5 col-lg-4 col-xl-2"},[t.saveShow?a("button",{staticClass:"btn btn-success w-100",attrs:{type:"button"},on:{click:t.onSaveClick}},[a("i",{staticClass:"fas fa-check"}),t._v(" Salvar\n    ")]):t._e()]),t.deleteShow?a("div",{staticClass:"form-group col-md-5 col-lg-4 col-xl-2 offset-md-1"},[a("button",{staticClass:"btn btn-danger w-100",attrs:{type:"button"},on:{click:t.onDeleteClick}},[a("i",{staticClass:"fas fa-trash"}),t._v(" Excluir\n    ")])]):t._e(),a("app-delete-modal",{ref:"modal",on:{ok:t.onDeleteAction}})],1)}),I=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modal",attrs:{"ok-variant":"danger","ok-title":"Excluir","cancel-title":"Cancelar","hide-header":!t.title,title:t.title},on:{ok:t.onDeleteClick,cancel:t.onCancelClick}},[t._v("Excluir registro?")])],1)},T=[],M={props:["title","value"],methods:{onDeleteClick:function(){this.$emit("ok",this.value)},onCancelClick:function(){this.$emit("cancel",this.value)},show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()}}},U=M,L=Object(h["a"])(U,B,T,!1,null,"7e103ec9",null),K=L.exports,F={components:{"app-delete-modal":K},props:{deleteShow:{type:Boolean,required:!1,default:!0},saveShow:{type:Boolean,required:!1,default:!0}},methods:{onSaveClick:function(){this.$emit("onSave")},onDeleteClick:function(){this.$refs.modal.show()},onDeleteAction:function(){this.$emit("onDelete")}}},H=F,V=Object(h["a"])(H,N,I,!1,null,"5cf765dc",null),G=V.exports,J=a("c1df"),z=a.n(J),W=a("2ef0"),Q=a.n(W),X={mixins:[o["a"]],props:{useRoute:{type:Boolean,required:!1,default:!0},parentEntityIdParam:{type:Number,required:!1,default:null},idParam:{type:Number,required:!1,default:null},entityParam:{type:Object,required:!1,default:null}},components:{"app-crud-buttons":G},data:function(){return{id:null,entity:{},changed:!1,parentEntity:null,parentEntityId:null,wsRequested:!1}},watch:{crud_title:function(t){this.$store.dispatch("setTitle",t)},entity:function(t){t&&(this.id=t._id?t._id:t.id)}},computed:{crud_hasParentEntity:function(){return this.useRoute?null!=this.$route.params.parentEntityId:null!=this.parentEntityIdParam},crud_url_edit:function(){return null},crud_scope:function(){return null},crud_hasNavBackRoute:function(){return!(!this.useRoute||!this.$route.params.navBackRoute)}},methods:{crud_data:function(){return null},crud_validate:function(){return!0},crud_onValidateError:function(){},crud_requestParentEntity:function(){return Promise.reject("Implementar crud_requestParentEntity")},crud_requestParentEntityParseResponse:function(t){return t.data.entity?t.data.entity:t.data.data?t.data.data:null},crud_refreshEntity:function(){var t=this;this.crud_hasParentEntity&&null==this.parentEntity?(this.api_loadingShow(),this.crud_requestParentEntity().then((function(e){t.api_parseOK(e)&&(e.data.warnings&&t.notify_warning(e.data.warnings),t.parentEntity=t.crud_requestParentEntityParseResponse(e),t.api_loadingHide(),t.crud_refreshEntityAction())})).catch(this.api_catch())):this.crud_refreshEntityAction()},crud_requestEntity:function(){var t=this.crud_url_edit;return t||(t=this.crud_url_base+"/"+this.id+"/edit"),s["a"].get(t)},crud_requestEntityParseResponse:function(t){return this.wsRequested=!0,t.data.entity?t.data.entity:t.data.data?t.data.data:null},crud_refreshEntityAction:function(){var t=this;this.api_loadingShow(),this.crud_requestEntity().then((function(e){t.api_parseOK(e)&&(e.data.warnings&&t.notify_warning(e.data.warnings),t.entity=t.crud_requestEntityParseResponse(e),t.api_loadingHide(),t.crud_afterRefresh())})).catch(this.api_catch())},crud_onDeleteAction:function(){var t=this;this.api_loadingShow(),s["a"].delete(this.crud_url_base+"/"+this.id).then(this.api_thenDone((function(e){t.changed=!0,e.data.warnings&&t.notify_warning(e.data.warnings),t.crud_navBack()}))).catch(this.api_catch())},crud_saveHasCustomRequest:function(){return!1},crud_saveBuildRequest:function(){return Promise.reject("Implementar crud_saveBuildRequest()")},crud_onSaveAction:function(){var t,e=this;t=this.crud_scope?this.$validator.validateAll(this.crud_scope):this.$validator.validateAll(),t.then((function(t){if(t){if(e.crud_validate()){var a;if(e.crud_saveHasCustomRequest())a=e.crud_saveBuildRequest();else{var n=e.crud_data();if(!n)return void e.notify_warning("Implemente o metodo <b>crud_data()</b>, retornando o objeto de dados.");e.api_loadingShow(),a=e.entity.id?n instanceof FormData?s["a"].put(e.crud_url_base+"/"+e.id,n,{headers:{"Content-Type":"multipart/form-data"}}):s["a"].put(e.crud_url_base+"/"+e.id,n):n instanceof FormData?s["a"].post(e.crud_url_base,n,{headers:{"Content-Type":"multipart/form-data"}}):s["a"].post(e.crud_url_base,n)}a.then(e.api_thenDone((function(t){e.changed=!0;var a=e.crud_requestEntityParseResponse(t),n=a._id?a._id:a.id;if(e.id=n,t.data.warnings&&e.notify_warning(t.data.warnings),e.crud_shouldNavBackAfterSave())e.crud_navBack();else if(e.crud_shouldRefreshAfterSave())e.crud_refreshEntity();else if(e.crud_shouldEditAfterSave()){var i=e.crud_editBuildRoute(n);e.$router.push(i)}e.crud_afterSave()}))).catch(e.api_catch())}}else e.crud_onValidateError()}))},crud_navBackBuildRoute:function(){if(this.useRoute&&this.$route.params.navBackRoute){var t=this.$route.params.navBackRoute;return t.params||(t.params={}),t.params.changed=this.changed,t}return{name:this.crud_route_base+".index",params:{page:this.useRoute?this.$route.params.page:null,changed:this.changed,parentEntity:this.parentEntity,parentEntityId:this.useRoute?this.$route.params.parentEntityId:this.parentEntityId}}},crud_editBuildRoute:function(t){return{name:this.crud_route_base+".edit",params:{id:t,changed:this.changed,page:this.useRoute?this.$route.params.page:null,parentEntity:this.parentEntity,parentEntityId:this.useRoute?this.$route.params.parentEntityId:this.parentEntityId}}},crud_navBack:function(){this.$router.push(this.crud_navBackBuildRoute())},crud_buildMyRoute:function(){return{name:this.$route.name,params:this.$route.params}},crud_beforeMount:function(){},crud_afterMount:function(){},crud_shouldNavBackAfterSave:function(){return!0},crud_afterSave:function(){},crud_afterRefresh:function(){},crud_shouldRefreshAfterSave:function(){return!0},crud_shouldEditAfterSave:function(){return!1},crud_moment:function(t){return z()(t)}},mounted:function(){this.crud_beforeMount(),this.useRoute?(this.$store.dispatch("setTitle",this.crud_title),this.parentEntity=this.$route.params.parentEntity,this.parentEntityId=this.$route.params.parentEntityId,void 0!==this.$route.params.changed&&(this.changed=this.$route.params.changed),this.$route.params.entity?(Q.a.merge(this.entity,this.$route.params.entity),this.id=this.entity._id?this.entity._id:this.entity.id):this.id=this.$route.params.id):(this.entity=this.entityParam,this.id=this.idParam,this.parentEntityId=this.parentEntityIdParam),this.id&&this.crud_refreshEntity(),this.crud_afterMount()}},Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control",domProps:{value:t.value},on:{change:t.onValueSelect}},[t.showAll?a("option",{attrs:{value:"0"}},[t._v("Todos")]):t._e(),a("option",{attrs:{value:"1"}},[t._v("1 - Administrador")]),a("option",{attrs:{value:"5"}},[t._v("5 - Gestor")]),a("option",{attrs:{value:"10"}},[t._v("10 - Conta")])])},Z=[],tt={props:{value:{type:[Number,String],required:!1,default:null},showAll:{type:Boolean,required:!1,default:!1}},methods:{onValueSelect:function(t){this.$emit("input",t.target.value)}}},et=tt,at=Object(h["a"])(et,Y,Z,!1,null,"c2af1e82",null),nt=at.exports,it={mixins:[X],components:{"app-user-level-select":nt},data:function(){return{entity:{_id:null,name:null,nickname:null,email:null,level:5,blocked:!1,accounts:[]},pwd_change:null,pwd_check:null,accountEntity:this.account_makeNew()}},methods:{crud_data:function(){return{_id:this.entity._id,name:this.entity.name,nickname:this.entity.nickname,email:this.entity.email,level:this.entity.level,blocked:!!this.entity.blocked,accounts:this.entity.accounts.map((function(t){return{_id:t._id,mid:t.mid,account_id:t.account_id._id,level:t.level}}))}},onPwdCheckClick:function(){var t=this;if(this.pwd_check){this.api_loadingShow();var e={pwd:this.pwd_check};s["a"].post("/api/admin/user/".concat(this.entity._id,"/pwd_check"),e).then(this.api_thenDone((function(){t.pwd_check=null}))).catch(this.api_catch())}else this.notify_warning("Digite a senha.")},onPwdChangeClick:function(){var t=this;if(this.pwd_change){if(confirm("Alterar senha deste usuário?")){this.api_loadingShow();var e={pwd:this.pwd_change};s["a"].post("/api/admin/user/".concat(this.entity._id,"/pwd_change"),e).then(this.api_thenDone((function(){t.pwd_change=null}))).catch(this.api_catch())}}else this.notify_warning("Digite a senha.")},crud_shouldNavBackAfterSave:function(){return!1},account_onDeleteClick:function(t){if(confirm("Excluir registro?")){var e=this.entity.accounts;e=this.entity.accounts.filter((function(e){return e.mid!=t.mid})),this.accountEntity=this.account_makeNew(),this.$set(this.entity,"accounts",e)}},account_onItemClick:function(t){this.account_isItemSelected(t)?this.accountEntity=this.account_makeNew():this.accountEntity=Q.a.cloneDeep(t)},account_isItemSelected:function(t){return this.accountEntity.mid==t.mid&&!this.accountEntity.new},account_onAddClick:function(){var t=this;if(this.accountEntity.account_id)if(this.accountEntity.new&&this.entity.accounts.find((function(e){return e.account_id._id==t.accountEntity.account_id._id})))this.notify_warning("Usuário já está vinculado com esta conta.");else{var e={mid:this.accountEntity.mid,account_id:this.accountEntity.account_id,level:this.accountEntity.level},a=this.entity.accounts;this.accountEntity.new?a.push(e):a=a.map((function(t){return t.mid==e.mid?e:t})),this.$set(this.entity,"accounts",a),this.accountEntity=this.account_makeNew()}else this.notify_warning("Selecione uma conta.")},account_makeNew:function(){return{new:!0,mid:(new Date).getTime(),account_id:null,level:20}},account_levelToDesc:function(t){switch(parseInt(t)){case 10:return"Administrador";case 15:return"Gestor";case 20:return"Usuário"}return"Desconhecido"}},computed:{crud_title:function(){var t=null!=this.entity;return t&&(t=this.entity.name),t?""+this.entity.name:"Cadastro de Usuário"},crud_url_base:function(){return"/api/admin/user"},crud_route_base:function(){return"user"}}},rt=it,st=Object(h["a"])(rt,A,D,!1,null,"0c3afad8",null),ot=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("br"),a("h1",[t._v(t._s(t.list_title))]),a("app-add-button",{on:{click:t.list_onAddClick}}),a("br"),a("br"),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-4"},[a("label",[t._v("Nível")]),a("app-user-level-select",{attrs:{"show-all":!0},model:{value:t.filters.level,callback:function(e){t.$set(t.filters,"level",e)},expression:"filters.level"}})],1),a("div",{staticClass:"form-group col-lg-8"},[a("label",[t._v("Pesquisar")]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text","aria-label":""},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.list_refreshCurrentPage(e)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.list_refreshCurrentPage}},[a("i",{staticClass:"fa fa-search"}),t._v(" Filtrar\n          ")])])])])]),a("table",{staticClass:"table table-hover table-striped"},[a("thead",[a("tr",{},[a("th",{staticClass:"app-table-id"},[a("app-info",{attrs:{title:"ID"}})],1),a("th",[t._v("Apelido")]),a("th",[t._v("Nome")]),a("th",[t._v("E-mail")]),a("th",[t._v("Nível")]),a("th",{staticClass:"text-right"},[t._v("\n          S.\n          "),a("app-info",{attrs:{title:"Situação"}})],1)])]),a("tbody",t._l(t.list.data,(function(e){return a("tr",{key:e._id,staticStyle:{cursor:"pointer"},on:{click:function(a){return t.list_onItemClick(e)}}},[a("td",[a("app-id",{attrs:{title:e._id}})],1),a("td",[t._v(t._s(e.nickname))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.level_desc))]),a("td",{staticClass:"text-right"},[e.blocked?a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-ban text-danger",attrs:{title:"Bloqueado"}}):a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-check text-success",attrs:{title:"Ativo"}})])])})),0)]),a("app-pagination",{attrs:{pagination:t.list},on:{paginate:function(e){return t.list_refreshPage(e)}}})],1)},lt=[],ut=a("ce7e"),dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-outline-secondary",on:{click:t.onButtonClick}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Adicionar\n")])},pt=[],ht={props:["value"],methods:{onButtonClick:function(){this.$emit("click",this.value)}}},ft=ht,mt=Object(h["a"])(ft,dt,pt,!1,null,"10958377",null),vt=mt.exports,_t=a("1134");function bt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function gt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var yt={mixins:[o["a"]],props:{useRoute:{type:Boolean,required:!1,default:!0},parentEntityIdParam:{type:Number,required:!1,default:null},onItemClickCallback:{type:Function,required:!1,default:null}},components:{"app-pagination":_t["a"],"app-refresh-button":ut["a"],"app-add-button":vt},data:function(){return{list:{data:[],current_page:1},parentEntity:null,parentEntityId:null,searchText:"",filters:null}},computed:gt({},Object(c["b"])({isLoading:"isLoading"}),{list_hasParentEntity:function(){return this.useRoute?null!=this.$route.params.parentEntityId:this.parentEntityId},list_hasNavBackRoute:function(){return!(!this.useRoute||!this.$route.params.navBackRoute)}}),methods:{list_buildURL:function(t){var e="".concat(this.list_url_base,"?page=").concat(t);return this.searchText&&(e+="&q=".concat(encodeURIComponent(this.searchText))),e},list_onAddBuildRoute:function(){return{name:this.list_route_base+".create",params:{id:null,entity:null,parentEntity:this.parentEntity,parentEntityId:this.useRoute?this.$route.params.parentEntityId:this.parentEntityId,page:{page:this.list,searchText:this.searchText,filters:this.filters}}}},list_onAddClick:function(){this.$router.push(this.list_onAddBuildRoute())},list_refreshCurrentPage:function(){var t;this.list&&(t=this.list.current_page),t||(t=1),this.list_refreshPage(t)},list_requestParentEntity:function(){return Promise.reject("Implementar list_requestParentEntity.")},list_requestParentEntityParseResponse:function(t){return t.data.entity?t.data.entity:t.data.data?t.data.data:null},list_refreshPage:function(t){var e=this;this.list_hasParentEntity&&null==this.parentEntity?this.list_requestParentEntity().then((function(a){e.api_parseOK(a)&&(e.parentEntity=e.list_requestParentEntityParseResponse(a),e.api_loadingHide(),a.data.warnings&&e.notify_warning(a.data.warnings),e.list_requestPageAction(t))})).catch(this.api_catch()):this.list_requestPageAction(t)},list_requestForPage:function(t){return s["a"].get(this.list_buildURL(t))},list_requestPageAction:function(t){this.api_loadingShow(),this.list_requestForPage(t).then(this.list_parseResponse()).catch(this.api_catch())},list_parseResponse:function(){var t=this;return function(e){t.api_parseOK(e)&&(e.data.page?t.list=e.data.page:e.data.data&&(t.list=e.data),t.list_afterRequest(e),t.api_loadingHide(),e.data.warnings&&t.notify_warning(e.data.warnings))}},list_onItemClickBuildRoute:function(t){return{name:this.list_route_base+".edit",params:{id:t?t.id:null,entity:t,parentEntity:this.parentEntity,parentEntityId:this.useRoute?this.$route.params.parentEntityId:this.parentEntityId,page:{page:this.list,searchText:this.searchText,filters:this.filters}}}},list_buildMyRoute:function(){return{name:this.$route.name,params:{page:{page:this.list,searchText:this.searchText,filters:this.filters}}}},list_onItemClick:function(t){this.onItemClickCallback?this.onItemClickCallback(t):this.$router.push(this.list_onItemClickBuildRoute(t))},list_navBackBuildRoute:function(){if(this.useRoute&&this.$route.params.navBackRoute){var t=this.$route.params.navBackRoute;return t.params.changed=this.$route.params.changed,t}return this.notify_warning("Implementar list_navBackBuildRoute"),null},list_navBack:function(){var t=this.list_navBackBuildRoute();t&&this.$router.push(t)},list_beforeMount:function(){},list_afterMount:function(){},list_moment:function(t){return z()(t)},list_afterRequest:function(t){},list_refrehOnMount:function(){return!0},list_forceRefrehOnMountWithParam:function(){return!1}},mounted:function(){if(this.list_beforeMount(),this.useRoute?(this.$store.dispatch("setTitle",this.list_title),this.parentEntity=this.$route.params.parentEntity,this.parentEntityId=this.$route.params.parentEntityId):this.parentEntityId=this.parentEntityIdParam,this.$route.params.page&&this.useRoute){var t=!0;this.$route.params.page.page&&(this.list=this.$route.params.page.page,t=!1),this.searchText=this.$route.params.page.searchText,this.filters=Q.a.merge(this.filters,this.$route.params.page.filters),(this.$route.params.changed||t||this.list_forceRefrehOnMountWithParam())&&this.list_refreshCurrentPage()}else this.list_refrehOnMount()&&this.list_refreshPage(1);this.list_afterMount()}},wt={mixins:[yt],components:{"app-user-level-select":nt},data:function(){return{filters:{level:0}}},computed:{list_title:function(){return"Usuários"},list_url_base:function(){return"/api/admin/user"},list_route_base:function(){return"user"}},methods:{list_buildURL:function(t){var e=this.list_url_base+"?page="+t+"&q="+encodeURIComponent(this.searchText?this.searchText:"");return this.filters.level>0&&(e+="&level=".concat(this.filters.level)),e}}},Ct=wt,kt=Object(h["a"])(Ct,ct,lt,!1,null,"22df1a9b",null),Et=kt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-4 col-xl-2"},[a("br"),a("router-view",{attrs:{name:"menu"}})],1),a("div",{staticClass:"col-12 col-md-8 col-xl-10"},[a("br"),a("router-view",{attrs:{name:"content"}})],1)])])},Ot=[],Pt={mounted:function(){this.$store.getters.getUser&&(this.$store.getters.isUserAdmin||(this.$store.dispatch("notifyDanger","Não autorizado."),this.$router.push("/")))}},$t=Pt,jt=Object(h["a"])($t,xt,Ot,!1,null,"07cbd1f0",null),St=jt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"nav flex-column"},[a("span",{staticClass:"nav-link nav-link-title"},[t._v("Sistema")]),a("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:{name:"maintenance.general"},tag:"a"}},[a("i",{staticClass:"fas fa-tachometer-alt"}),t._v(" Geral\n  ")]),a("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:{name:"config.edit"},tag:"a"}},[a("i",{staticClass:"fas fa-cogs"}),t._v(" Editar\n    "),a("strong",[t._v("configuração")])])],1)},Rt=[],At={},Dt=At,Nt=(a("e6e2"),Object(h["a"])(Dt,qt,Rt,!1,null,"05de8f3e",null)),It=Nt.exports,Bt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jumbotron"},[a("h4",[t._v("Selecione a configuração")]),a("p",{staticClass:"lead text-danger"},[a("strong",[t._v("Atenção!")]),t._v(" Configurações erradas podem fazer o sistema parar de funcionar.\n  ")])])}],Mt={mixins:[o["a"]],data:function(){return{artisanCommand:""}},mounted:function(){this.$store.dispatch("setTitle","Manutenção")}},Ut=Mt,Lt=Object(h["a"])(Ut,Bt,Tt,!1,null,"0dd877dd",null),Kt=Lt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("br"),a("h1",[t._v("Editar arquivo de configuração")]),t._m(0),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.file_content,expression:"file_content"}],staticClass:"form-control",attrs:{rows:"20",name:"file_content"},domProps:{value:t.file_content},on:{input:function(e){e.target.composing||(t.file_content=e.target.value)}}})]),a("br"),a("div",{staticClass:"d-flex flex-row"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:!t.wsLoadOK},on:{click:t.onSaveClick}},[a("i",{staticClass:"fas fa-check"}),t._v(" Salvar\n    ")]),a("div",{staticClass:"col-1"}),a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:"/dashboard"}},[a("i",{staticClass:"fas fa-close"}),t._v(" Voltar\n    ")])],1)])},Ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-danger"},[a("strong",[t._v("Atenção!")]),t._v(" Configurações erradas podem fazer o sistema parar de funcionar. "),a("br"),t._v("\n    É necessário "),a("strong",[t._v("reiniciar a instância de aplicação ")]),t._v(" para as configurações terem efeito.\n  ")])}],Vt={mixins:[o["a"]],data:function(){return{file_content:"",wsLoadOK:!1}},methods:{onSaveClick:function(){this.api_loadingShow(),s["a"].post("api/admin/maintenance/config_update",{file_content:this.file_content}).then(this.api_thenDone()).catch(this.api_catch())},reloadContent:function(){var t=this;this.api_loadingShow(),s["a"].get("api/admin/maintenance/config_get").then((function(e){t.api_parseOK(e,!1)&&(t.file_content=e.data.file_content,t.wsLoadOK=!0,t.api_loadingHide())})).catch(this.api_catch((function(e){t.wsLoadOK=!1})))}},mounted:function(){this.$store.dispatch("setTitle","Editar config.json"),this.reloadContent()}},Gt=Vt,Jt=Object(h["a"])(Gt,Ft,Ht,!1,null,"471cae36",null),zt=Jt.exports;e["default"]=[{path:"/",redirect:"/dashboard"},{path:"/dashboard",components:{default:m,header:k,footer:x["a"]},name:"dashboard"},{path:"/user/profile",components:{default:R,header:k,footer:x["a"]},name:"user.profile"},{path:"/user",components:{default:Et,header:k,footer:x["a"]},name:"user.index"},{path:"/user/:id/edit",components:{default:ot,header:k,footer:x["a"]},name:"user.edit"},{path:"/user/create",components:{default:ot,header:k,footer:x["a"]},name:"user.create"},{path:"/maintenance",components:{default:St,header:k,footer:x["a"]},children:[{path:"",redirect:{name:"maintenance.general"}},{path:"general",components:{menu:It,content:Kt},name:"maintenance.general"},{path:"config/edit",components:{menu:It,content:zt},name:"config.edit"}]},{path:"*",components:{default:E["a"],header:k,footer:x["a"]}}]},f96c:function(t,e,a){"use strict";var n=a("a55b"),i=a.n(n);i.a}});
//# sourceMappingURL=admin.5c46a7cab0b46573d053.js.map